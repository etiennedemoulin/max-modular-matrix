{"version":3,"names":["Client","launcher","createLayout","render","html","config","window","SOUNDWORKS_CONFIG","main","$container","client","register","initScreensContainer","start","schema","stateManager","attach","matrix","get","e","set","state","detail","value","document","body","execute","numClients","parseInt","URLSearchParams","location","search"],"sources":["../../../src/clients/matrix/index.js"],"sourcesContent":["import '@soundworks/helpers/polyfills.js';\nimport { Client } from '@soundworks/core/client.js';\nimport launcher from '@soundworks/helpers/launcher.js';\n\nimport createLayout from './layout.js';\n\nimport { render, html } from 'lit/html.js';\n\nimport '../../../../../src/sc-modularmatrix.js';\n\n// - General documentation: https://soundworks.dev/\n// - API documentation:     https://soundworks.dev/api\n// - Issue Tracker:         https://github.com/collective-soundworks/soundworks/issues\n// - Wizard & Tools:        `npx soundworks`\n\n/**\n * Grab the configuration object written by the server in the `index.html`\n */\nconst config = window.SOUNDWORKS_CONFIG;\n\n/**\n * If multiple clients are emulated you might to want to share some resources\n */\n// const audioContext = new AudioContext();\n\nasync function main($container) {\n  /**\n   * Create the soundworks client\n   */\n  const client = new Client(config);\n\n\n  launcher.register(client, { initScreensContainer: $container });\n\n  /**\n   * Launch application\n   */\n  await client.start();\n\n  const schema = await client.stateManager.attach('matrix');\n  const matrix = schema.get('structure');\n\n  render(html`\n    <sc-modularmatrix\n      style=\"width:100%;height:100%\"\n      @change=${e => schema.set({state:e.detail.value})}\n      .matrix=${matrix}\n    ></sc-modularmatrix>\n  `, document.body);\n\n  // do your own stuff!\n}\n\n// The launcher enables instanciation of multiple clients in the same page to\n// facilitate development and testing.\n// e.g. `http://127.0.0.1:8000?emulate=10` to run 10 clients side-by-side\nlauncher.execute(main, {\n  numClients: parseInt(new URLSearchParams(window.location.search).get('emulate')) || 1,\n});\n"],"mappings":"AAAA,OAAO,kCAAkC;AACzC,SAASA,MAAM,QAAQ,4BAA4B;AACnD,OAAOC,QAAQ,MAAM,iCAAiC;AAEtD,OAAOC,YAAY,MAAM,aAAa;AAEtC,SAASC,MAAM,EAAEC,IAAI,QAAQ,aAAa;AAE1C,OAAO,wCAAwC;;AAE/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAMC,MAAM,GAAGC,MAAM,CAACC,iBAAiB;;AAEvC;AACA;AACA;AACA;;AAEA,eAAeC,IAAIA,CAACC,UAAU,EAAE;EAC9B;AACF;AACA;EACE,MAAMC,MAAM,GAAG,IAAIV,MAAM,CAACK,MAAM,CAAC;EAGjCJ,QAAQ,CAACU,QAAQ,CAACD,MAAM,EAAE;IAAEE,oBAAoB,EAAEH;EAAW,CAAC,CAAC;;EAE/D;AACF;AACA;EACE,MAAMC,MAAM,CAACG,KAAK,CAAC,CAAC;EAEpB,MAAMC,MAAM,GAAG,MAAMJ,MAAM,CAACK,YAAY,CAACC,MAAM,CAAC,QAAQ,CAAC;EACzD,MAAMC,MAAM,GAAGH,MAAM,CAACI,GAAG,CAAC,WAAW,CAAC;EAEtCf,MAAM,CAACC,IAAK;AACd;AACA;AACA,gBAAgBe,CAAC,IAAIL,MAAM,CAACM,GAAG,CAAC;IAACC,KAAK,EAACF,CAAC,CAACG,MAAM,CAACC;EAAK,CAAC,CAAE;AACxD,gBAAgBN,MAAO;AACvB;AACA,GAAG,EAAEO,QAAQ,CAACC,IAAI,CAAC;;EAEjB;AACF;;AAEA;AACA;AACA;AACAxB,QAAQ,CAACyB,OAAO,CAAClB,IAAI,EAAE;EACrBmB,UAAU,EAAEC,QAAQ,CAAC,IAAIC,eAAe,CAACvB,MAAM,CAACwB,QAAQ,CAACC,MAAM,CAAC,CAACb,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI;AACtF,CAAC,CAAC"}
